<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wheel of Names</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&family=Bangers&display=swap" rel="stylesheet">
    <!-- <link rel="stylesheet" href="./css/app-v310.css"> -->
    <!-- <link rel="stylesheet" href="./css/EditWheelPage-v310.css"> -->

    <style>
        body {
            background-color: #0d0d0d;
            font-family: Arial, sans-serif;
        }

        .navbar {
            background-color: #3367D6;
            overflow: hidden;
            padding: 5px 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-weight: bold;
        }

        .navbar .logo {
            display: flex;
            align-items: center;
            padding-left: 20px;
        }

        .navbar .logo img {
            height: 40px;
            margin-right: 10px;
        }

        .navbar .menu {
            display: flex;
            list-style: none;
            margin-right: 20px;
        }

        .navbar .menu li {
            margin: 0 10px;
            position: relative;
        }

        .navbar .menu li a {
            color: white;
            text-decoration: none;
            font-size: 14px;
            display: flex;
            align-items: center;
            font-size: 15px;
        }

        .navbar .menu li a:hover {
            color: #A3C1E6;
        }

        .navbar .menu li i {
            margin-right: 5px;
        }

        .navbar .menu .dropdown {
            cursor: pointer;
        }

        .navbar .menu .dropdown:hover .dropdown-content {
            display: block;
        }

        .navbar .menu .dropdown-content {
            display: none;
            position: absolute;
            background-color: #3367D6;
            box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
            z-index: 1;
        }

        .navbar .menu .dropdown-content a {
            color: white;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }

        .navbar .menu .dropdown-content a:hover {
            background-color: #5678E4;
        }

        .header {
            padding: 40px;
            color: #fff;
            margin: 0 auto;
            margin-bottom: 40px;
        }

        .header h1,
        p {
            text-align: center;
        }

        .center-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-color: #fff;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
        }

        .triangle {
            width: 0;
            height: 0;
            border-top: 20px solid transparent;
            border-bottom: 20px solid transparent;
            border-right: 40px solid #BBBBBB;
            position: absolute;
            top: 50%;
            right: -220%;
            transform: translateY(-50%);
            filter: drop-shadow(3px 3px 4px rgba(0, 0, 0, 0.6));
        }



        textarea,
        input {
            background-color: rgba(20, 20, 20, 0.2);
            caret-color: #fff;
            resize: none;
            color: #fff;
        }

        .inputArea {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 40px;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 50%;
            text-align: center;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            margin-top: -50px;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        /* New styles to center the wheel and move the name list to the right */
        .container {
            display: flex;
            justify-content: space-between;
            /* Space between the wheel and the name list */
            /* align-items: flex-start; */
            /* Align both items at the top */
            margin-top: 40px;
        }

        .wheel {
            display: flex;
            justify-content: center;
            position: relative;
            flex: 1;
        }

        @media (max-width: 990px) {
            .container {
                flex-direction: column;
                gap: 8rem;
            }

            .inputArea {
                /* margin-right: 50px; */
                flex-wrap: wrap;
                align-content: center;
                /* align-items: baseline; */
                width: 100%;
            }

        }

        @media (max-width: 768px) {
            .navbar .menu {
                flex-direction: column;
                align-items: flex-start;
            }

            .navbar .menu li {
                margin: 10px 0;
            }

            .container {
                flex-direction: column;
                align-items: center;
            }

            .wheel {
                margin: 20px 0;
                max-width: 90%;
            }

            .center-circle {
                width: 60px;
                height: 60px;
            }
        }

        @media (max-width: 480px) {
            .navbar .logo img {
                height: 30px;
            }

            .navbar .menu li a {
                font-size: 12px;
            }

            .center-circle {
                width: 50px;
                height: 50px;
            }

            .buttons button {
                font-size: 10px;
            }

            .container {
                padding: 0 20px;
            }
        }


        .inputArea {
            display: flex;
            flex-direction: column;
            align-items: baseline;
            /* Align items to the right */
            /* Push the input area to the right */
        }

        /* Main container */
        .main-container {
            background-color: #1f1f1f;
            /* Background color for the container */
            padding: 20px;
            /* Padding inside the container */
            border-radius: 10px;
            /* Rounded corners */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            /* Subtle shadow for depth */
            width: 300px;
            /* Set width for the container */
            margin: 20px auto;
            /* Center the container */
            color: #fff;
            /* Text color */
            margin-top: -40px;
            margin-right: -50px;
        }

        /* Tabs Section */
        .tabs {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .tabs ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
        }

        .tabs ul li {
            padding: 10px 20px;
            background-color: #333;
            color: #fff;
            cursor: pointer;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
            font-size: 14px;
        }

        .tabs ul li.active {
            background-color: #444;
        }

        .tabs ul li:hover {
            background-color: #555;
        }

        /* Tab count */
        .tab-count {
            background-color: #666;
            border-radius: 50%;
            padding: 3px 8px;
            font-size: 12px;
            margin-left: 5px;
        }

        /* Hide checkbox */
        #hideResults {
            margin-left: 15px;
        }

        #hideResults+label {
            color: #fff;
            font-size: 14px;
            cursor: pointer;
        }

        /* Buttons Section */
        .buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .buttons button {
            background-color: #333;
            color: #fff;
            border: none;
            padding: 8px 15px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 12px;
            display: flex;
            align-items: center;
        }

        .buttons button i {
            margin-right: 5px;
        }

        .buttons button:hover {
            background-color: #555;
        }

        /* Text Area and Input */
        textarea,
        input {
            width: 100%;
            background-color: rgba(20, 20, 20, 0.2);
            caret-color: #fff;
            resize: none;
            color: #fff;
            border: 1px solid #666;
            padding: 8px;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        /* Advanced Checkbox */
        .advanced {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .advanced input[type="checkbox"] {
            margin-right: 5px;
        }
    </style>


    <!-- <style>
        /* General styling */
        body {
            background-color: #0d0d0d;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        .navbar {
            background-color: #3367D6;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-weight: bold;
        }

        
        .navbar .logo {
            display: flex;
            align-items: center;
            padding-left: 20px;
        }

        .navbar .logo img {
            height: 40px;
            margin-right: 10px;
        }

        .navbar .menu {
            display: flex;
            list-style: none;
            margin-right: 20px;
        }

        .navbar .menu li {
            margin: 0 10px;
            position: relative;
        }

        .navbar .menu li a {
            color: white;
            text-decoration: none;
            font-size: 14px;
            display: flex;
            align-items: center;
            font-size: 15px;
        }

        .navbar .menu li a:hover {
            color: #A3C1E6;
        }

        .navbar .menu .dropdown-content {
            display: none;
            position: absolute;
            background-color: #3367D6;
            box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
            z-index: 1;
        }

        .header {
            padding: 40px;
            color: #fff;
            text-align: center;
        }

        .center-circle {
            width: 80px;
            height: 80px;
            background-color: #fff;
            position: absolute;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .triangle {
            width: 0;
            height: 0;
            border-top: 20px solid transparent;
            border-bottom: 20px solid transparent;
            border-right: 40px solid #BBBBBB;
            position: absolute;
            top: 50%;
            right: -220%;
            transform: translateY(-50%);
            filter: drop-shadow(3px 3px 4px rgba(0, 0, 0, 0.6));
        }

        .container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin-top: 40px;
        }

        .wheel {
            display: flex;
            justify-content: center;
            position: relative;
            flex: 1;
            max-width: 600px;
            margin: 0 auto;
            cursor: pointer;
        }

        .inputArea {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 40px;
        }

        textarea,
        input {
            width: 100%;
            background-color: rgba(20, 20, 20, 0.2);
            color: #fff;
            border: 1px solid #666;
            padding: 8px;
            border-radius: 5px;
        }

        .buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            justify-content: center;
        }

        .buttons button {
            background-color: #333;
            color: #fff;
            border: none;
            padding: 8px 15px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 12px;
            display: flex;
            align-items: center;
        }

        @media (max-width: 768px) {
            .navbar .menu {
                flex-direction: column;
                align-items: flex-start;
            }

            .navbar .menu li {
                margin: 10px 0;
            }

            .container {
                flex-direction: column;
                align-items: center;
            }

            .wheel {
                margin: 20px 0;
                max-width: 90%;
            }

            .center-circle {
                width: 60px;
                height: 60px;
            }
        }

        @media (max-width: 480px) {
            .navbar .logo img {
                height: 30px;
            }

            .navbar .menu li a {
                font-size: 12px;
            }

            .center-circle {
                width: 50px;
                height: 50px;
            }

            .buttons button {
                font-size: 10px;
            }

            .container {
                padding: 0 20px;
            }
        }
    </style> -->

</head>

<body>
    <!-- <div class="navbar" style="margin-top: -10px; margin-left: -15px;">
        <div class="logo">
            <img src="logo_2.png" alt="Wheel Logo" style="border-radius: 50%;"> 
            <span style="color: white; font-size: 18px;">wheelofnames.com</span>
        </div>
        <ul class="menu">
            <li><a href="#"><i class="fas fa-palette"></i> Customize</a></li>&nbsp &nbsp &nbsp &nbsp
            <li><a href="#"><i class="fas fa-file-alt"></i> New</a></li> &nbsp &nbsp &nbsp &nbsp
            <li><a href="#"><i class="fas fa-folder-open"></i> Open</a></li>&nbsp &nbsp &nbsp &nbsp
            <li><a href="#"><i class="fas fa-save"></i> Save</a></li>&nbsp &nbsp &nbsp &nbsp
            <li><a href="#"><i class="fas fa-share-alt"></i> Share</a></li>&nbsp &nbsp &nbsp &nbsp
            <li><a href="#"><i class="fas fa-search"></i> Gallery</a></li>&nbsp &nbsp &nbsp &nbsp
            <li class="dropdown">
                <a href="#">More</a>
                <div class="dropdown-content">
                    <a href="#">Option 1</a>
                    <a href="#">Option 2</a>
                </div>
            </li>&nbsp &nbsp
            <li><a href="#"><i class="fas fa-globe"></i>English</a></li>
        </ul>
    </div> -->

    <div class="container">
        <div class="wheel" onclick="spin()" style="margin-right: -60px">
            <canvas id="canvas" width="450" height="450"></canvas>
            <div class="center-circle">
                <div class="triangle" style="margin-right: -80px; "></div>
            </div>

            <div data-v-e1ff2ff6="" id="instructionsLayer" style="font-size: 39px;">
                <!-- <div data-v-e1ff2ff6="" class="instructionsText" id="topInstruction" style="padding-top: 20%;">
                    <div aria-label="Click to spin" style="position: relative; height: 2.57809em;"><span style="position: absolute; bottom: auto; left: 50%; transform: translateX(-0.389022em) rotate(-33.2749deg); transform-origin: center 6.70085em;">C</span><span style="position: absolute; bottom: auto; left: 50%; transform: translateX(-0.166667em) rotate(-27.1531deg); transform-origin: center 6.70085em;">l</span><span style="position: absolute; bottom: auto; left: 50%; transform: translateX(-0.166667em) rotate(-23.4809deg); transform-origin: center 6.70085em;">i</span><span style="position: absolute; bottom: auto; left: 50%; transform: translateX(-0.32512em) rotate(-18.0631deg); transform-origin: center 6.70085em;">c</span><span style="position: absolute; bottom: auto; left: 50%; transform: translateX(-0.333534em) rotate(-10.807deg); transform-origin: center 6.70085em;">k</span><span style="position: absolute; bottom: auto; left: 50%; transform: translateX(-0.166867em) rotate(-5.29424deg); transform-origin: center 6.70085em;">&nbsp;</span><span style="position: absolute; bottom: auto; left: 50%; transform: translateX(-0.221955em) rotate(-1.01074deg); transform-origin: center 6.70085em;">t</span><span style="position: absolute; bottom: auto; left: 50%; transform: translateX(-0.333534em) rotate(5.10886deg); transform-origin: center 6.70085em;">o</span><span style="position: absolute; bottom: auto; left: 50%; transform: translateX(-0.166867em) rotate(10.6216deg); transform-origin: center 6.70085em;">&nbsp;</span><span style="position: absolute; bottom: auto; left: 50%; transform: translateX(-0.305489em) rotate(15.8253deg); transform-origin: center 6.70085em;">s</span><span style="position: absolute; bottom: auto; left: 50%; transform: translateX(-0.333534em) rotate(22.8652deg); transform-origin: center 6.70085em;">p</span><span style="position: absolute; bottom: auto; left: 50%; transform: translateX(-0.166667em) rotate(28.3757deg); transform-origin: center 6.70085em;">i</span><span style="position: absolute; bottom: auto; left: 50%; transform: translateX(-0.333534em) rotate(33.8862deg); transform-origin: center 6.70085em;">n</span></div>
                </div> -->
                <!-- <div data-v-e1ff2ff6="" class="instructionsText" id="bottomInstruction" style="padding-top: 60%;">
                    <div aria-label="or press ctrl+enter" style="position: relative; height: 3.83381em;"><span style="position: absolute; bottom: 0px; left: 50%; transform: translateX(-0.333534em) rotate(52.8718deg); transform-origin: center -5.20085em;">o</span><span style="position: absolute; bottom: 0px; left: 50%; transform: translateX(-0.221955em) rotate(46.7522deg); transform-origin: center -5.20085em;">r</span><span style="position: absolute; bottom: 0px; left: 50%; transform: translateX(-0.166867em) rotate(42.4687deg); transform-origin: center -5.20085em;">&nbsp;</span><span style="position: absolute; bottom: 0px; left: 50%; transform: translateX(-0.333534em) rotate(36.956deg); transform-origin: center -5.20085em;">p</span><span style="position: absolute; bottom: 0px; left: 50%; transform: translateX(-0.230168em) rotate(30.7459deg); transform-origin: center -5.20085em;">r</span><span style="position: absolute; bottom: 0px; left: 50%; transform: translateX(-0.333534em) rotate(24.5358deg); transform-origin: center -5.20085em;">e</span><span style="position: absolute; bottom: 0px; left: 50%; transform: translateX(-0.305489em) rotate(17.4959deg); transform-origin: center -5.20085em;">s</span><span style="position: absolute; bottom: 0px; left: 50%; transform: translateX(-0.305489em) rotate(10.765deg); transform-origin: center -5.20085em;">s</span><span style="position: absolute; bottom: 0px; left: 50%; transform: translateX(-0.166867em) rotate(5.56127deg); transform-origin: center -5.20085em;">&nbsp;</span><span style="position: absolute; bottom: 0px; left: 50%; transform: translateX(-0.333534em) rotate(0.0485508deg); transform-origin: center -5.20085em;">c</span><span style="position: absolute; bottom: 0px; left: 50%; transform: translateX(-0.221955em) rotate(-6.07105deg); transform-origin: center -5.20085em;">t</span><span style="position: absolute; bottom: 0px; left: 50%; transform: translateX(-0.238582em) rotate(-11.1446deg); transform-origin: center -5.20085em;">r</span><span style="position: absolute; bottom: 0px; left: 50%; transform: translateX(-0.166667em) rotate(-15.6091deg); transform-origin: center -5.20085em;">l</span><span style="position: absolute; bottom: 0px; left: 50%; transform: translateX(-0.330128em) rotate(-21.0821deg); transform-origin: center -5.20085em;">+</span><span style="position: absolute; bottom: 0px; left: 50%; transform: translateX(-0.333534em) rotate(-28.3934deg); transform-origin: center -5.20085em;">e</span><span style="position: absolute; bottom: 0px; left: 50%; transform: translateX(-0.333534em) rotate(-35.7422deg); transform-origin: center -5.20085em;">n</span><span style="position: absolute; bottom: 0px; left: 50%; transform: translateX(-0.221955em) rotate(-41.8618deg); transform-origin: center -5.20085em;">t</span><span style="position: absolute; bottom: 0px; left: 50%; transform: translateX(-0.333534em) rotate(-47.9814deg); transform-origin: center -5.20085em;">e</span><span style="position: absolute; bottom: 0px; left: 50%; transform: translateX(-0.221955em) rotate(-54.101deg); transform-origin: center -5.20085em;">r</span></div>
                </div> -->
            </div>
        </div>

        <div class="inputArea">

            <!-- Entries and Results Tabs -->
            <div class="tabs" style="margin-top: -70px; margin-right: -50px;">
                <ul>
                    <li id="entriesTab" class="" style="background-color: #0d0d0d; font-size: 15px; font-weight: bold;">
                        Entries<span class="tab-count">6</span></li>
                    <li id="resultsTab" style="background-color: #0d0d0d; font-size: 15px; font-weight: bold;">
                        Results<span class="tab-count">3</span></li>
                    <input type="checkbox" id="hideResults">
                    <label for="hideResults" style="margin-top: 7px;"> Hide</label>
                </ul>
            </div>
            <br><br>
            <!-- Container with background color -->
            <div class="main-container">
                <!-- Buttons Section -->
                <div class="buttons">
                    <button id="shuffleBtn"><i class="fas fa-random"></i> Shuffle</button>
                    <button id="sortBtn"><i class="fas fa-sort"></i> Sort</button>
                    <button id="addImageBtn"><i class="fas fa-image"></i> Add Image</button>
                </div>

                <!-- Text Area and Input -->
                <textarea id="names" rows="15" cols="30"
                    style="font-family: Arial; font-size: 16px; padding: 10px; width: 284px; line-height: 1.5"><?php echo htmlspecialchars($names); ?></textarea>

                <script>
                    // Add this function to send AJAX request to update the database
                    function updateDatabase(names) {
                        const xhr = new XMLHttpRequest();
                        xhr.open("POST", "update_names.php", true);
                        xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
                        xhr.onreadystatechange = function () {
                            if (xhr.readyState === XMLHttpRequest.DONE) {
                                if (xhr.status === 200) {
                                    console.log(xhr.responseText); // For debugging
                                } else {
                                    console.error("Error updating database");
                                }
                            }
                        };
                        xhr.send("names=" + encodeURIComponent(names));
                    }

                    // Modify the event listener for the textarea
                    document.getElementById("names").addEventListener("input", function () {
                        createWheel(); // Update the wheel with the new names
                        updateDatabase(this.value); // Update the database with the new names
                    });
                </script>

                <div>Comment mo to pag na test mo na <br>Line: 715-716 sa index.html</div>
                <input id="stopName" type="" placeholder="Name to stop on" value="">

                <!-- Advanced Checkbox -->
                <div class="advanced">
                    <input type="checkbox" id="advanced" style="margin-right: -130px;">
                    <label for="advanced" style="">Advanced</label>
                </div>

            </div>

        </div>


        <!-- Modal HTML -->
        <!-- <div id="winnerModal" class="modal" style="border-radius: 20px;">
            <div class="modal-content" style="background-color: #d9d9d9;">
                <p style="text-align: left; font-weight: bold; background-color: #1a1a1a; padding: 20px; font-size: 15px; margin-top: -20px; width: 100%; margin-left: -20px; color: white;">We have a winner!</p>
                <span class="close" onclick="closeModal()" style="font-size: 40px;">&times;</span>
                <h2 id="winnerName" style="text-align: left; font-size: 40px;">Winner's Name</h2>
                <br>
                <button onclick="restartWheel()">Spin Again</button>
            </div>
        </div> -->

        <!-- <script>
            function toRad(deg) {
                return deg * (Math.PI / 180.0);
            }

            function randomRange(min, max) {
                return Math.floor(Math.random() * (max - min + 1)) + min;
            }

            function easeOutSine(x) {
                return Math.sin((x * Math.PI) / 2);
            }

            function getPercent(input, min, max) {
                return (((input - min) * 100) / (max - min)) / 100;
            }

            const canvas = document.getElementById("canvas");
            const ctx = canvas.getContext("2d");
            const width = canvas.width;
            const height = canvas.height;

            const centerX = width / 2;
            const centerY = height / 2;
            const radius = width / 2;

            let items = document.getElementById("names").value.split("\n").map(item => item.trim()).filter(item => item);
            let currentDeg = 0;
            let step = 360 / items.length;
            const colors = ['#ffffff', '#000000']; // White, Black 
            let itemDegs = {};

            function createWheel() {
                items = document.getElementById("names").value.split("\n").map(item => item.trim()).filter(item => item);
                step = 360 / items.length;
                itemDegs = {};
                draw();
            }

         
            function draw() {
                ctx.clearRect(0, 0, width, height); // Clear the canvas
                ctx.beginPath();
                ctx.arc(centerX, centerY, radius, toRad(0), toRad(360));
                ctx.fillStyle = `rgb(${33},${33},${33})`; // Background color
                ctx.fill();

                let startDeg = currentDeg;
                for (let i = 0; i < items.length; i++, startDeg += step) {
                    let endDeg = startDeg + step;
                    const color = colors[i % colors.length]; // Cycle through the colors

                    // Draw the segment
                    ctx.beginPath();
                    ctx.arc(centerX, centerY, radius, toRad(startDeg), toRad(endDeg));
                    ctx.fillStyle = color;
                    ctx.lineTo(centerX, centerY);
                    ctx.fill();

                    // Determine the text color based on the segment color
                    const textColor = (color === '#000000') ? '#FFFFFF' : '#000000'; // White for black segments, black for white segments

                    // Draw text
                    ctx.save();
                    ctx.translate(centerX, centerY);
                    ctx.rotate(toRad((startDeg + endDeg) / 2));
                    ctx.textAlign = "center";
                    ctx.fillStyle = textColor; // Dynamic text color based on the segment color

                    // Adjust font size based on segment width
                    const fontSize = Math.min(40, radius / 4); // Adjust this value for better fit
                    ctx.font = `${fontSize}px Arial`;

                    // Draw text so that it's centered within the segment
                    ctx.fillText(items[i], radius - 70, 10); // Adjusted position to keep text inside
                    ctx.restore();

                    itemDegs[items[i]] = {
                        "startDeg": startDeg,
                        "endDeg": endDeg
                    };
                }
            }


            let speed = 0;
            let maxRotation = randomRange(360 * 3, 360 * 6);
            let pause = false;

            function animate() {
                if (pause) {
                    return;
                }
                speed = easeOutSine(getPercent(currentDeg, maxRotation, 0)) * 5;
                if (speed < 0.01) {
                    speed = 0;
                    pause = true;
                    // showWinner();
                }
                currentDeg += speed;
                draw();
                window.requestAnimationFrame(animate);
            }

            function spin() {
                if (speed !== 0) {
                    console.log('speed is 0')
                }

                const stopName = document.getElementById("stopName").value.trim();
                console.log(stopName);
                console.log(itemDegs[stopName]);

                if (stopName && itemDegs[stopName]) {
                    maxRotation = (360 * 2) - itemDegs[stopName].endDeg - 10;
                    currentDeg = 0;
                    draw();
                } else {
                    // If the specified name is not found or input is empty
                    maxRotation = (360 * 3);
                }

                itemDegs = {};
                pause = false;
                window.requestAnimationFrame(animate);
            }



     

            function restartWheel() {
                // closeModal();
                // spin();
            }

            // Initialize wheel creation
            createWheel();

            // Add real-time update for the textarea
            document.getElementById("names").addEventListener("input", createWheel);
        </script>  -->

        <!-- <script>
            function toRad(deg) {
                return deg * (Math.PI / 180.0);
            }

            function randomRange(min, max) {
                return Math.floor(Math.random() * (max - min + 1)) + min;
            }

            function easeOutSine(x) {
                return Math.sin((x * Math.PI) / 2);
            }

            function easeOutCosine(x) {
                return Math.cos((x * Math.PI) * 2);
            }


            function getPercent(input, min, max) {
                return (((input - min) * 100) / (max - min)) / 100;
            }

            const canvas = document.getElementById("canvas");
            const ctx = canvas.getContext("2d");
            const width = canvas.width;
            const height = canvas.height;

            const centerX = width / 2;
            const centerY = height / 2;
            const radius = width / 2;

            let items = document.getElementById("names").value.split("\n").map(item => item.trim()).filter(item => item);
            let currentDeg = 0;
            let step = 360 / items.length;
            const colors = ['#ffffff', '#000000']; // White, Black 
            let itemDegs = {};

            function createWheel() {
                items = document.getElementById("names").value.split("\n").map(item => item.trim()).filter(item => item);
                step = 360 / items.length;
                itemDegs = {};
                draw();
            }

            function draw() {
                ctx.clearRect(0, 0, width, height); // Clear the canvas
                ctx.beginPath();
                ctx.arc(centerX, centerY, radius, toRad(0), toRad(360));
                ctx.fillStyle = `rgb(${33},${33},${33})`; // Background color
                ctx.fill();

                let startDeg = currentDeg;
                for (let i = 0; i < items.length; i++, startDeg += step) {
                    let endDeg = startDeg + step;
                    const color = colors[i % colors.length]; // Cycle through the colors

                    // Draw the segment
                    ctx.beginPath();
                    ctx.arc(centerX, centerY, radius, toRad(startDeg), toRad(endDeg));
                    ctx.fillStyle = color;
                    ctx.lineTo(centerX, centerY);
                    ctx.fill();

                    // Determine the text color based on the segment color
                    const textColor = (color === '#000000') ? '#FFFFFF' : '#000000'; // White for black segments, black for white segments

                    // Draw text
                    ctx.save();
                    ctx.translate(centerX, centerY);
                    ctx.rotate(toRad((startDeg + endDeg) / 2));
                    ctx.textAlign = "center";
                    ctx.fillStyle = textColor; // Dynamic text color based on the segment color

                    // Adjust font size based on segment width
                    const fontSize = Math.min(40, radius / 4); // Adjust this value for better fit
                    ctx.font = `${fontSize}px Arial`;

                    // Draw text so that it's centered within the segment
                    ctx.fillText(items[i], radius - 70, 10); // Adjusted position to keep text inside
                    ctx.restore();

                    itemDegs[items[i]] = {
                        "startDeg": startDeg,
                        "endDeg": endDeg
                    };
                }
            }

            // let speed = 0;
            // let maxRotation = (360 * 3);
            // let pause = false;

            // function animate() {
            //     if (pause) return;
            //     speed = easeOutSine(getPercent(currentDeg, maxRotation, 0)) * 10;
            //     if (speed < 0.01) {
            //         speed = 0;
            //         pause = true;
            //         // showWinner();
            //     }
            //     console.log(currentDeg)
            //     currentDeg += speed; // Keep adding to currentDeg for continuous spin
            //     // console.log(`CURRENT DEG: ${currentDeg}`)
            //     // console.log(`SPEED: ${speed}`)
            //     draw();
            //     window.requestAnimationFrame(animate);
            // }

            // function spin() {
            //     if (speed !== 0) return;

            //     // Calculate the maxRotation based on the specified stop name or a random spin
            //     const stopName = document.getElementById("stopName").value.trim();

            //     console.log(stopName);
            //     if (stopName && itemDegs[stopName]) {
            //         // Set the max rotation to spin to the target segment
            //         maxRotation = currentDeg + (360 * 3) - itemDegs[stopName].endDeg + 10; // Ensure it spins to the right position
            //         console.log(`SPEED: ${speed}`)
            //         console.log(`CURRENT DEG: ${currentDeg + (360 * 3)}`)
            //         console.log(`itemDegs: ${itemDegs[stopName].endDeg + 10}`)
            //         console.log(`maxRotation: ${maxRotation}`)
            //         currentDeg = 10;
            //         draw();
            //     } else {
            //         // If the specified name is not found or input is empty
            //         maxRotation = currentDeg + (360 * 3);
            //     }

            //     // itemDegs = {}; // Reset the item degrees for a fresh calculation
            //     pause = false; // Resume the animation
            //     window.requestAnimationFrame(animate);
            // }
            let speed = 0;
            let maxRotation = 0; // Reset this for each spin
            let pause = false;
            let lightSegments = []; // To store segment names dynamically

            function animate() {
                if (pause) return;
                // speed = easeOutSine(getPercent(currentDeg, maxRotation, 0)) * 30; // Increase speed for a faster spin
                speed = easeOutSine((getPercent(currentDeg, maxRotation, 360))) * 10; // Increase speed for a faster spin
                console.log(`CURRENT DEG: ${currentDeg}`);
                console.log(`PERCENTAGE: ${getPercent(currentDeg, maxRotation, 0) * 30}`);
                console.log(`SPEED: ${speed}`);

                if (speed < 0.01) {
                    speed = 0;
                    pause = true; // Stop the animation
                    // Optionally show the winner here
                }
                currentDeg += speed; // Keep adding to currentDeg for continuous spin
                draw(); // Redraw the wheel
                window.requestAnimationFrame(animate);
            }

            // function spin() {
            //     if (speed !== 0) return; // Prevent spinning if already spinning

            //     const stopName = document.getElementById("stopName").value.trim();
            //     console.log(stopName);

            //     // Calculate maxRotation based on stopName
            //     if (stopName && itemDegs[stopName]) {
            //         // Find the last segment's angle for the specified stopName
            //         let endDegrees = Object.keys(itemDegs)
            //             .filter(name => name.includes(stopName)) // Filter for segment names that match stopName
            //             .map(name => itemDegs[name].endDeg); // Get their end degrees

            //         // Get a random end degree from matching segments
            //         let randomEndDeg = endDegrees[Math.floor(Math.random() * endDegrees.length)];

            //         // Calculate maxRotation based on the current position and the target
            //         maxRotation = currentDeg + (360 * 3.5) - randomEndDeg + 20; // Ensure it spins to the right position
            //         console.log(`CURRENT DEG: ${currentDeg}`);
            //         console.log(`RANDOM END DEG: ${randomEndDeg}`);
            //         console.log(`maxRotation: ${maxRotation}`);

            //         currentDeg = 10; // Reset the current degree to start spinning again
            //         draw();
            //     } else {
            //         // If the specified name is not found or input is empty, spin randomly
            //         maxRotation = currentDeg + (360 * 3);
            //     }

            //     // Reset itemDegs if needed
            //     pause = false; // Resume the animation
            //     window.requestAnimationFrame(animate);
            // }
            function spin() {
                if (speed !== 0) return; // Prevent spinning if already spinning

                const stopName = document.getElementById("stopName").value.trim();
                console.log(stopName);

                // Calculate a random maxRotation between 360 * 3 and 360 * 4
                const randomMultiplier = 24.67; // Randomly choose a value between 3 and 4
                const randomMaxRotation = 60 * randomMultiplier;

                //DARK START RANDOM MULTIPLIER: 24.7
                //DARK START MAX ROTATION: 1202

                //DARK END RANDOM MULTIPLIER: 25.64
                //DARK END MAX ROTATION: 1258.4

                //LIGHT START RANDOM MULTIPLIER: 23.7
                //LIGHT START MAX ROTATION: 1142

                //LIGHT START RANDOM MULTIPLIER: 24.64
                //LIGHT START MAX ROTATION: 1198.4

                // Calculate maxRotation based on stopName
                if (stopName && itemDegs[stopName]) {
                    // Find the last segment's angle for the specified stopName
                    let endDegrees = Object.keys(itemDegs)
                        .filter(name => name.includes(stopName)) // Filter for segment names that match stopName
                        .map(name => itemDegs[name].endDeg); // Get their end degrees

                    // Get a random end degree from matching segments
                    let randomEndDeg = endDegrees[Math.floor(Math.random() * endDegrees.length)];

                    // Calculate maxRotation based on the current position and the target
                    // maxRotation = currentDeg + randomMaxRotation - randomEndDeg + 20; // Ensure it spins to the right position
                    // maxRotation = lightSegmentRandom;
                    // console.log(`CURRENT DEG: ${currentDeg}`);
                    // console.log(`RANDOM END DEG: ${randomEndDeg}`);
                    // console.log(`endDegress: ${endDegrees}`);
                    // console.log(`RANDOM MULTIPLIER: ${randomMultiplier}`);
                    console.log(`maxRotation: ${maxRotation}`);

                    currentDeg = 0; // Reset the current degree to start spinning again
                    draw();
                } else {
                    console.log(`CURRENT DEG: ${currentDeg}`);
                    console.log(`RANDOM MULTIPLIER: ${randomMultiplier}`);
                    console.log(`maxRotation: ${maxRotation}`);

                    // If the specified name is not found or input is empty, spin randomly
                    maxRotation = currentDeg + randomMaxRotation;
                }

                pause = false; // Resume the animation
                window.requestAnimationFrame(animate);
            }
            let predeterminedResult = '';

            function randomSegmentOfColor() {
                return Math.random() * 56.40000000000009;
            }
            // Event listener for key presses
            window.addEventListener('keydown', (event) => {
                switch (event.key) {

                    case '1':
                        // if (pause) return;
                        // if (speed !== 0) return;
                        const lightSegmentRandom = 1142 + (randomSegmentOfColor());
                        console.log(1142);
                        console.log(randomSegmentOfColor());
                        console.log(lightSegmentRandom);
                        maxRotation = lightSegmentRandom
                        predeterminedResult = 'LIGHT'; // Set result to Light
                        console.log(`predeterminedResult: ${predeterminedResult}`);
                        var a = document.getElementById('stopName').value = predeterminedResult;
                        break;

                    case '2':
                        // if (pause) return;
                        // if (speed !== 0) return;
                        const darkSegmentRandom = 1202 + (randomSegmentOfColor());
                        console.log(1202);
                        console.log(darkSegmentRandom);
                        predeterminedResult = 'DARK'; // Set result to Dark
                        maxRotation = darkSegmentRandom
                        console.log(`predeterminedResult: ${predeterminedResult}`);
                        document.getElementById('stopName').value = predeterminedResult;
                        break;
                    default:
                        break;
                }
            });


            // Initialize wheel creation
            createWheel();

            // Add real-time update for the textarea
            document.getElementById("names").addEventListener("input", createWheel);
        </script> -->
        <script>
            function toRad(deg) {
                return deg * (Math.PI / 180.0);
            }

            function randomRange(min, max) {
                return Math.floor(Math.random() * (max - min + 1)) + min;
            }

            function easeOutSine(x) {
                return Math.sin((x * Math.PI) / 2);
            }

            function easeOutCosine(x) {
                return Math.cos((x * Math.PI) * 2);
            }

            function getPercent(input, min, max) {
                return (((input - min) * 100) / (max - min)) / 100;
            }

            const canvas = document.getElementById("canvas");
            const ctx = canvas.getContext("2d");
            const width = canvas.width;
            const height = canvas.height;

            const centerX = width / 2;
            const centerY = height / 2;
            const radius = width / 2;

            // Retrieve names from localStorage if available
            let storedNames = localStorage.getItem('wheelNames') || '';
            document.getElementById("names").value = storedNames; // Set the textarea with stored value

            let items = storedNames.split("\n").map(item => item.trim()).filter(item => item); // Initialize items with stored names

            let currentDeg = 0;
            let step = 360 / items.length;
            const colors = ['#ffffff', '#000000']; // White, Black
            let itemDegs = {};

            function createWheel() {
                items = document.getElementById("names").value.split("\n").map(item => item.trim()).filter(item => item);
                step = 360 / items.length;
                itemDegs = {};

                // Save the current names to localStorage whenever the wheel is created/updated
                localStorage.setItem('wheelNames', document.getElementById("names").value);

                draw();
            }

            function draw() {
                ctx.clearRect(0, 0, width, height); // Clear the canvas
                ctx.beginPath();
                ctx.arc(centerX, centerY, radius, toRad(0), toRad(360));
                ctx.fillStyle = `rgb(${33},${33},${33})`; // Background color
                ctx.fill();

                let startDeg = currentDeg;
                for (let i = 0; i < items.length; i++, startDeg += step) {
                    let endDeg = startDeg + step;
                    const color = colors[i % colors.length]; // Cycle through the colors

                    // Draw the segment
                    ctx.beginPath();
                    ctx.arc(centerX, centerY, radius, toRad(startDeg), toRad(endDeg));
                    ctx.fillStyle = color;
                    ctx.lineTo(centerX, centerY);
                    ctx.fill();

                    // Determine the text color based on the segment color
                    const textColor = (color === '#000000') ? '#FFFFFF' : '#000000'; // White for black segments, black for white segments

                    // Draw text
                    ctx.save();
                    ctx.translate(centerX, centerY);
                    ctx.rotate(toRad((startDeg + endDeg) / 2));
                    ctx.textAlign = "center";
                    ctx.fillStyle = textColor; // Dynamic text color based on the segment color

                    // Adjust font size based on segment width
                    const fontSize = Math.min(40, radius / 4); // Adjust this value for better fit
                    ctx.font = `${fontSize}px Arial`;

                    // Draw text so that it's centered within the segment
                    ctx.fillText(items[i], radius - 70, 10); // Adjusted position to keep text inside
                    ctx.restore();

                    itemDegs[items[i]] = {
                        "startDeg": startDeg,
                        "endDeg": endDeg
                    };
                }
            }

            let speed = 0;
            let maxRotation = 0; // Reset this for each spin
            let pause = false;
            let lightSegments = []; // To store segment names dynamically

            function animate() {
                if (pause) return;
                // speed = easeOutSine(getPercent(currentDeg, maxRotation, 0)) * 30; // Increase speed for a faster spin
                speed = easeOutSine((getPercent(currentDeg, maxRotation, 180))) * 20; // Increase speed for a faster spin
                /* console.log(`CURRENT DEG: ${currentDeg}`);
            console.log(`PERCENTAGE: ${getPercent(currentDeg, maxRotation, 0) * 10}`);
            console.log(`SPEED: ${speed}`);
 */
                if (speed < 0.01) {
                    speed = 0;
                    pause = true; // Stop the animation
                    // Optionally show the winner here
                }
                currentDeg += speed; // Keep adding to currentDeg for continuous spin
                draw(); // Redraw the wheel
                window.requestAnimationFrame(animate);
            }

            // function spin() {
            //     if (speed !== 0) return; // Prevent spinning if already spinning

            //     const stopName = document.getElementById("stopName").value.trim();
            //     console.log(stopName);

            //     // Calculate maxRotation based on stopName
            //     if (stopName && itemDegs[stopName]) {
            //         // Find the last segment's angle for the specified stopName
            //         let endDegrees = Object.keys(itemDegs)
            //             .filter(name => name.includes(stopName)) // Filter for segment names that match stopName
            //             .map(name => itemDegs[name].endDeg); // Get their end degrees

            //         // Get a random end degree from matching segments
            //         let randomEndDeg = endDegrees[Math.floor(Math.random() * endDegrees.length)];

            //         // Calculate maxRotation based on the current position and the target
            //         maxRotation = currentDeg + (360 * 3.5) - randomEndDeg + 20; // Ensure it spins to the right position
            //         console.log(`CURRENT DEG: ${currentDeg}`);
            //         console.log(`RANDOM END DEG: ${randomEndDeg}`);
            //         console.log(`maxRotation: ${maxRotation}`);

            //         currentDeg = 10; // Reset the current degree to start spinning again
            //         draw();
            //     } else {
            //         // If the specified name is not found or input is empty, spin randomly
            //         maxRotation = currentDeg + (360 * 3);
            //     }

            //     // Reset itemDegs if needed
            //     pause = false; // Resume the animation
            //     window.requestAnimationFrame(animate);
            // }
            function spin() {
                if (speed !== 0) return; // Prevent spinning if already spinning

                const stopName = document.getElementById("stopName").value.trim();
                console.log(stopName);

                // Calculate a random maxRotation between 360 * 3 and 360 * 4
                const randomMultiplier = 24.67; // Randomly choose a value between 3 and 4
                const randomMaxRotation = 60 * randomMultiplier;

                //DARK START RANDOM MULTIPLIER: 24.7
                //DARK START MAX ROTATION: 1202

                //DARK END RANDOM MULTIPLIER: 25.64
                //DARK END MAX ROTATION: 1258.4

                //LIGHT START RANDOM MULTIPLIER: 23.7
                //LIGHT START MAX ROTATION: 1142

                //LIGHT START RANDOM MULTIPLIER: 24.64
                //LIGHT START MAX ROTATION: 1198.4

                // Calculate maxRotation based on stopName
                if (stopName && itemDegs[stopName]) {
                    // Find the last segment's angle for the specified stopName
                    let endDegrees = Object.keys(itemDegs)
                        .filter(name => name.includes(stopName)) // Filter for segment names that match stopName
                        .map(name => itemDegs[name].endDeg); // Get their end degrees

                    // Get a random end degree from matching segments
                    let randomEndDeg = endDegrees[Math.floor(Math.random() * endDegrees.length)];

                    // Calculate maxRotation based on the current position and the target
                    // maxRotation = currentDeg + randomMaxRotation - randomEndDeg + 20; // Ensure it spins to the right position
                    // maxRotation = lightSegmentRandom;
                    // console.log(`CURRENT DEG: ${currentDeg}`);
                    // console.log(`RANDOM END DEG: ${randomEndDeg}`);
                    // console.log(`endDegress: ${endDegrees}`);
                    // console.log(`RANDOM MULTIPLIER: ${randomMultiplier}`);
                    console.log(`maxRotation: ${maxRotation}`);

                    currentDeg = 0; // Reset the current degree to start spinning again
                    draw();
                } else {

                    // If the specified name is not found or input is empty, spin randomly
                    maxRotation = randomRange();
                    currentDeg = 0; // Reset the current degree to start spinning again
                    console.log(`maxRotation: ${maxRotation}`);
                }

                pause = false; // Resume the animation
                window.requestAnimationFrame(animate);
            }
            let predeterminedResult = '';

            function randomSegmentOfColor() {
                return Math.random() * 56.40000000000009;
            }

            function randomRange() {
                const randomMultiplier = randomSegmentOfColor();
                console.log(`RANDOM MULTIPLIER: ${randomMultiplier}`);
                const a = [1142, 1202];
                const index = Math.floor(Math.random() * 2)
                return a[index] + randomMultiplier;
            }


            // Event listener for key presses
            window.addEventListener('keydown', (event) => {
                switch (event.key) {

                    case '1':
                        // if (pause) return;
                        // if (speed !== 0) return;
                        const lightSegmentRandom = 1142 + (randomSegmentOfColor());
                        console.log(1142);
                        console.log(randomSegmentOfColor());
                        console.log(lightSegmentRandom);
                        maxRotation = lightSegmentRandom
                        predeterminedResult = 'LIGHT'; // Set result to Light
                        console.log(`predeterminedResult: ${predeterminedResult}`);
                        var a = document.getElementById('stopName').value = predeterminedResult;
                        break;

                    case '2':
                        // if (pause) return;
                        // if (speed !== 0) return;
                        const darkSegmentRandom = 1202 + (randomSegmentOfColor());
                        console.log(1202);
                        console.log(darkSegmentRandom);
                        predeterminedResult = 'DARK'; // Set result to Dark
                        maxRotation = darkSegmentRandom
                        console.log(`predeterminedResult: ${predeterminedResult}`);
                        document.getElementById('stopName').value = predeterminedResult;
                        break;

                    case '3':
                        maxRotation = randomRange();
                        document.getElementById('stopName').value = '';
                        break;
                    default:
                        break;
                }
            });

            // Initialize wheel creation (load from localStorage if available)
            createWheel();

            // Add real-time update for the textarea
            document.getElementById("names").addEventListener("input", createWheel);
        </script>
</body>

</html>